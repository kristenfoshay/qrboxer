Attaching to qrboxer-backend_db_1, qrboxer-backend_test-db_1, qrboxer-backend_tests_1
[33mtest-db_1  |[0m The files belonging to this database system will be owned by user "postgres".
[33mtest-db_1  |[0m This user must also own the server process.
[33mtest-db_1  |[0m 
[36mdb_1       |[0m The files belonging to this database system will be owned by user "postgres".
[36mdb_1       |[0m This user must also own the server process.
[36mdb_1       |[0m 
[36mdb_1       |[0m The database cluster will be initialized with locale "en_US.utf8".
[36mdb_1       |[0m The default database encoding has accordingly been set to "UTF8".
[36mdb_1       |[0m The default text search configuration will be set to "english".
[36mdb_1       |[0m 
[36mdb_1       |[0m Data page checksums are disabled.
[33mtest-db_1  |[0m The database cluster will be initialized with locale "en_US.utf8".
[33mtest-db_1  |[0m The default database encoding has accordingly been set to "UTF8".
[33mtest-db_1  |[0m The default text search configuration will be set to "english".
[33mtest-db_1  |[0m 
[33mtest-db_1  |[0m Data page checksums are disabled.
[33mtest-db_1  |[0m 
[36mdb_1       |[0m 
[33mtest-db_1  |[0m fixing permissions on existing directory /var/lib/postgresql/data ... ok
[36mdb_1       |[0m fixing permissions on existing directory /var/lib/postgresql/data ... ok
[33mtest-db_1  |[0m creating subdirectories ... ok
[33mtest-db_1  |[0m selecting dynamic shared memory implementation ... posix
[36mdb_1       |[0m creating subdirectories ... ok
[33mtest-db_1  |[0m selecting default max_connections ... 100
[36mdb_1       |[0m selecting dynamic shared memory implementation ... posix
[33mtest-db_1  |[0m selecting default shared_buffers ... 128MB
[36mdb_1       |[0m selecting default max_connections ... 100
[36mdb_1       |[0m selecting default shared_buffers ... 128MB
[36mdb_1       |[0m selecting default time zone ... Etc/UTC
[36mdb_1       |[0m creating configuration files ... ok
[33mtest-db_1  |[0m selecting default time zone ... Etc/UTC
[36mdb_1       |[0m running bootstrap script ... ok
[36mdb_1       |[0m performing post-bootstrap initialization ... ok
[36mdb_1       |[0m syncing data to disk ... initdb: warning: enabling "trust" authentication for local connections
[36mdb_1       |[0m You can change this by editing pg_hba.conf or using the option -A, or
[36mdb_1       |[0m --auth-local and --auth-host, the next time you run initdb.
[36mdb_1       |[0m ok
[36mdb_1       |[0m 
[36mdb_1       |[0m 
[36mdb_1       |[0m Success. You can now start the database server using:
[36mdb_1       |[0m 
[36mdb_1       |[0m     pg_ctl -D /var/lib/postgresql/data -l logfile start
[36mdb_1       |[0m 
[36mdb_1       |[0m waiting for server to start....2025-01-24 20:02:38.135 UTC [48] LOG:  starting PostgreSQL 14.15 (Debian 14.15-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
[36mdb_1       |[0m 2025-01-24 20:02:38.222 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[36mdb_1       |[0m 2025-01-24 20:02:38.485 UTC [49] LOG:  database system was shut down at 2025-01-24 20:02:35 UTC
[36mdb_1       |[0m 2025-01-24 20:02:38.569 UTC [48] LOG:  database system is ready to accept connections
[36mdb_1       |[0m  done
[36mdb_1       |[0m server started
[36mdb_1       |[0m CREATE DATABASE
[33mtest-db_1  |[0m creating configuration files ... ok
[36mdb_1       |[0m 
[36mdb_1       |[0m 
[36mdb_1       |[0m /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
[36mdb_1       |[0m 
[33mtest-db_1  |[0m running bootstrap script ... ok
[36mdb_1       |[0m 2025-01-24 20:02:40.271 UTC [48] LOG:  received fast shutdown request
[36mdb_1       |[0m waiting for server to shut down....2025-01-24 20:02:40.337 UTC [48] LOG:  aborting any active transactions
[36mdb_1       |[0m 2025-01-24 20:02:40.339 UTC [69] FATAL:  the database system is shutting down
[33mtest-db_1  |[0m performing post-bootstrap initialization ... ok
[33mtest-db_1  |[0m syncing data to disk ... ok
[33mtest-db_1  |[0m 
[33mtest-db_1  |[0m 
[33mtest-db_1  |[0m Success. You can now start the database server using:
[33mtest-db_1  |[0m 
[33mtest-db_1  |[0m     pg_ctl -D /var/lib/postgresql/data -l logfile start
[33mtest-db_1  |[0m 
[36mdb_1       |[0m 2025-01-24 20:02:40.340 UTC [48] LOG:  background worker "logical replication launcher" (PID 55) exited with exit code 1
[36mdb_1       |[0m 2025-01-24 20:02:40.340 UTC [50] LOG:  shutting down
[33mtest-db_1  |[0m initdb: warning: enabling "trust" authentication for local connections
[33mtest-db_1  |[0m You can change this by editing pg_hba.conf or using the option -A, or
[33mtest-db_1  |[0m --auth-local and --auth-host, the next time you run initdb.
[33mtest-db_1  |[0m waiting for server to start....2025-01-24 20:02:38.094 UTC [48] LOG:  starting PostgreSQL 14.15 (Debian 14.15-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
[36mdb_1       |[0m .2025-01-24 20:02:41.836 UTC [48] LOG:  database system is shut down
[33mtest-db_1  |[0m 2025-01-24 20:02:38.175 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[36mdb_1       |[0m  done
[36mdb_1       |[0m server stopped
[33mtest-db_1  |[0m 2025-01-24 20:02:38.438 UTC [49] LOG:  database system was shut down at 2025-01-24 20:02:35 UTC
[36mdb_1       |[0m 
[36mdb_1       |[0m PostgreSQL init process complete; ready for start up.
[36mdb_1       |[0m 
[33mtest-db_1  |[0m 2025-01-24 20:02:38.537 UTC [48] LOG:  database system is ready to accept connections
[36mdb_1       |[0m 2025-01-24 20:02:42.490 UTC [1] LOG:  starting PostgreSQL 14.15 (Debian 14.15-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
[36mdb_1       |[0m 2025-01-24 20:02:42.490 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[36mdb_1       |[0m 2025-01-24 20:02:42.490 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[36mdb_1       |[0m 2025-01-24 20:02:42.891 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtest-db_1  |[0m  done
[33mtest-db_1  |[0m server started
[36mdb_1       |[0m 2025-01-24 20:02:43.410 UTC [71] LOG:  database system was shut down at 2025-01-24 20:02:41 UTC
[33mtest-db_1  |[0m CREATE DATABASE
[36mdb_1       |[0m 2025-01-24 20:02:43.518 UTC [1] LOG:  database system is ready to accept connections
[33mtest-db_1  |[0m 
[33mtest-db_1  |[0m 
[33mtest-db_1  |[0m /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/schema.sql
[33mtest-db_1  |[0m CREATE TABLE
[33mtest-db_1  |[0m CREATE TABLE
[33mtest-db_1  |[0m CREATE TABLE
[33mtest-db_1  |[0m CREATE TABLE
[33mtest-db_1  |[0m 
[33mtest-db_1  |[0m 
[33mtest-db_1  |[0m 2025-01-24 20:02:42.361 UTC [48] LOG:  received fast shutdown request
[33mtest-db_1  |[0m waiting for server to shut down....2025-01-24 20:02:42.438 UTC [48] LOG:  aborting any active transactions
[33mtest-db_1  |[0m 2025-01-24 20:02:42.442 UTC [48] LOG:  background worker "logical replication launcher" (PID 55) exited with exit code 1
[33mtest-db_1  |[0m 2025-01-24 20:02:42.442 UTC [50] LOG:  shutting down
[33mtest-db_1  |[0m .2025-01-24 20:02:44.118 UTC [48] LOG:  database system is shut down
[33mtest-db_1  |[0m  done
[33mtest-db_1  |[0m server stopped
[33mtest-db_1  |[0m 
[33mtest-db_1  |[0m PostgreSQL init process complete; ready for start up.
[33mtest-db_1  |[0m 
[33mtest-db_1  |[0m 2025-01-24 20:02:44.552 UTC [1] LOG:  starting PostgreSQL 14.15 (Debian 14.15-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
[33mtest-db_1  |[0m 2025-01-24 20:02:44.552 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[33mtest-db_1  |[0m 2025-01-24 20:02:44.552 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[33mtest-db_1  |[0m 2025-01-24 20:02:44.713 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtest-db_1  |[0m 2025-01-24 20:02:44.892 UTC [73] LOG:  database system was shut down at 2025-01-24 20:02:44 UTC
[33mtest-db_1  |[0m 2025-01-24 20:02:44.998 UTC [1] LOG:  database system is ready to accept connections
[32mtests_1    |[0m 
[32mtests_1    |[0m > qrboxer@0.1.0 test
[32mtests_1    |[0m > jest -i --detectOpenHandles --forceExit --verbose --forceExit --detectOpenHandles --runInBand --bail
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     QRBoxer Config:
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:22:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     SECRET_KEY: secret-dev
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:23:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PORT: 3001
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:24:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     BCRYPT_WORK_FACTOR 1
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:25:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database: postgresql://test_user:test_password@test-db:5432/test_db
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:26:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     ---
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:27:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database connection closed.
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (config/db.js:61:13)
[32mtests_1    |[0m 
[32mtests_1    |[0m PASS tests/models/move.test.js
[32mtests_1    |[0m   Move Model Tests
[32mtests_1    |[0m     create
[32mtests_1    |[0m       âœ“ works (118 ms)
[32mtests_1    |[0m       âœ“ bad request with duplicate date (41 ms)
[32mtests_1    |[0m     get
[32mtests_1    |[0m       âœ“ works (184 ms)
[32mtests_1    |[0m       âœ“ not found if no such move (174 ms)
[32mtests_1    |[0m     update
[32mtests_1    |[0m       âœ“ works (48 ms)
[32mtests_1    |[0m       âœ“ not found if no such move (34 ms)
[32mtests_1    |[0m       âœ“ works: partial update (48 ms)
[32mtests_1    |[0m     findAll
[32mtests_1    |[0m       âœ“ works: finds all moves for user (60 ms)
[32mtests_1    |[0m       âœ“ works: returns empty array if no moves found (35 ms)
[32mtests_1    |[0m     remove
[32mtests_1    |[0m       âœ“ works: removes move and boxes cascade (49 ms)
[32mtests_1    |[0m       âœ“ not found if no such move (17 ms)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     QRBoxer Config:
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:22:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     SECRET_KEY: secret-dev
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:23:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PORT: 3001
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:24:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     BCRYPT_WORK_FACTOR 1
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:25:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database: postgresql://test_user:test_password@test-db:5432/test_db
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:26:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     ---
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:27:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     QRBoxer Config:
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:22:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     SECRET_KEY: secret-dev
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:23:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PORT: 3001
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:24:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     BCRYPT_WORK_FACTOR 1
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:25:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database: postgresql://test_user:test_password@test-db:5432/test_db
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:26:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     ---
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:27:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     QRBoxer Config:
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:22:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     SECRET_KEY: secret-dev
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:23:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PORT: 3001
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:24:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     BCRYPT_WORK_FACTOR 1
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:25:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database: postgresql://test_user:test_password@test-db:5432/test_db
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:26:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     ---
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:27:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m POST /users 201 75 - 3.541 ms
[32mtests_1    |[0m POST /users 400 202 - 1.328 ms
[32mtests_1    |[0m POST /users 400 233 - 1.169 ms
[32mtests_1    |[0m GET /users 200 103 - 0.539 ms
[32mtests_1    |[0m GET /users 200 12 - 0.409 ms
[32mtests_1    |[0m GET /users/testuser 200 144 - 0.507 ms
[32mtests_1    |[0m GET /users/nonexistent 404 26 - 0.568 ms
[32mtests_1    |[0m PATCH /users/testuser 200 55 - 0.940 ms
[32mtests_1    |[0m PATCH /users/testuser 400 32 - 0.260 ms
[32mtests_1    |[0m PATCH /users/testuser 400 35 - 0.318 ms
[32mtests_1    |[0m PATCH /users/nonexistent 404 26 - 0.567 ms
[32mtests_1    |[0m DELETE /users/testuser 200 22 - 0.406 ms
[32mtests_1    |[0m DELETE /users/nonexistent 404 26 - 0.402 ms
[32mtests_1    |[0m PASS tests/routes/userRoutes.test.js
[32mtests_1    |[0m   User Routes Test
[32mtests_1    |[0m     POST /users
[32mtests_1    |[0m       âœ“ works: creates a new user (42 ms)
[32mtests_1    |[0m       âœ“ bad request with missing fields (69 ms)
[32mtests_1    |[0m       âœ“ bad request with invalid data (9 ms)
[32mtests_1    |[0m     GET /users
[32mtests_1    |[0m       âœ“ works: gets all users (7 ms)
[32mtests_1    |[0m       âœ“ works: empty list on no users (9 ms)
[32mtests_1    |[0m     GET /users/:username
[32mtests_1    |[0m       âœ“ works: gets user by username (7 ms)
[32mtests_1    |[0m       âœ“ not found if user doesn't exist (7 ms)
[32mtests_1    |[0m     PATCH /users/:username
[32mtests_1    |[0m       âœ“ works: updates user (9 ms)
[32mtests_1    |[0m       âœ“ bad request with invalid data (9 ms)
[32mtests_1    |[0m       âœ“ bad request with empty update (8 ms)
[32mtests_1    |[0m       âœ“ not found if user doesn't exist (9 ms)
[32mtests_1    |[0m     DELETE /users/:username
[32mtests_1    |[0m       âœ“ works: deletes user (7 ms)
[32mtests_1    |[0m       âœ“ not found if user doesn't exist (7 ms)
[32mtests_1    |[0m 
[32mtests_1    |[0m FAIL tests/routes/boxRoutes.test.js
[32mtests_1    |[0m   â— Test suite failed to run
[32mtests_1    |[0m 
[32mtests_1    |[0m     Jest encountered an unexpected token
[32mtests_1    |[0m 
[32mtests_1    |[0m     Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.
[32mtests_1    |[0m 
[32mtests_1    |[0m     Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.
[32mtests_1    |[0m 
[32mtests_1    |[0m     By default "node_modules" folder is ignored by transformers.
[32mtests_1    |[0m 
[32mtests_1    |[0m     Here's what you can do:
[32mtests_1    |[0m      â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
[32mtests_1    |[0m      â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
[32mtests_1    |[0m      â€¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
[32mtests_1    |[0m      â€¢ If you need a custom transformation specify a "transform" option in your config.
[32mtests_1    |[0m      â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.
[32mtests_1    |[0m 
[32mtests_1    |[0m     You'll find more details and examples of these config options in the docs:
[32mtests_1    |[0m     https://jestjs.io/docs/configuration
[32mtests_1    |[0m     For information about custom transformations, see:
[32mtests_1    |[0m     https://jestjs.io/docs/code-transformation
[32mtests_1    |[0m 
[32mtests_1    |[0m     Details:
[32mtests_1    |[0m 
[32mtests_1    |[0m     SyntaxError: /usr/src/app/tests/routes/boxRoutes.test.js: Unexpected token (56:4)
[32mtests_1    |[0m 
[32mtests_1    |[0m       54 |             expect(finalResponse.body.boxes.length).toBe(0);
[32mtests_1    |[0m       55 |         });
[32mtests_1    |[0m     > 56 |     });
[32mtests_1    |[0m          |     ^
[32mtests_1    |[0m       57 |
[32mtests_1    |[0m       58 |     describe("Error Handling Tests", () => {
[32mtests_1    |[0m       59 |         test("should handle invalid box creation", async () => {
[32mtests_1    |[0m 
[32mtests_1    |[0m       at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
[32mtests_1    |[0m       at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1496:19)
[32mtests_1    |[0m       at Parser.raise [as unexpected] (node_modules/@babel/parser/src/tokenizer/index.ts:1536:16)
[32mtests_1    |[0m       at Parser.unexpected [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1316:16)
[32mtests_1    |[0m       at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:709:23)
[32mtests_1    |[0m       at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:688:21)
[32mtests_1    |[0m       at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:650:23)
[32mtests_1    |[0m       at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:389:14)
[32mtests_1    |[0m       at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:401:23)
[32mtests_1    |[0m       at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:356:23)
[32mtests_1    |[0m       at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:298:21)
[32mtests_1    |[0m       at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:221:23)
[32mtests_1    |[0m       at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:212:39)
[32mtests_1    |[0m       at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3111:16)
[32mtests_1    |[0m       at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:212:17)
[32mtests_1    |[0m       at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:656:23)
[32mtests_1    |[0m       at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:437:17)
[32mtests_1    |[0m       at Parser.parseStatementLike [as parseModuleItem] (node_modules/@babel/parser/src/parser/statement.ts:374:17)
[32mtests_1    |[0m       at Parser.parseModuleItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1406:16)
[32mtests_1    |[0m       at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
[32mtests_1    |[0m       at Parser.parseBlockBody [as parseProgram] (node_modules/@babel/parser/src/parser/statement.ts:225:10)
[32mtests_1    |[0m       at Parser.parseProgram [as parseTopLevel] (node_modules/@babel/parser/src/parser/statement.ts:203:25)
[32mtests_1    |[0m       at Parser.parseTopLevel [as parse] (node_modules/@babel/parser/src/parser/index.ts:47:10)
[32mtests_1    |[0m       at parse (node_modules/@babel/parser/src/index.ts:66:38)
[32mtests_1    |[0m       at parser (node_modules/@babel/core/src/parser/index.ts:28:19)
[32mtests_1    |[0m           at parser.next (<anonymous>)
[32mtests_1    |[0m       at normalizeFile (node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)
[32mtests_1    |[0m           at normalizeFile.next (<anonymous>)
[32mtests_1    |[0m       at run (node_modules/@babel/core/src/transformation/index.ts:40:36)
[32mtests_1    |[0m           at run.next (<anonymous>)
[32mtests_1    |[0m       at transform (node_modules/@babel/core/src/transform.ts:29:20)
[32mtests_1    |[0m           at transform.next (<anonymous>)
[32mtests_1    |[0m       at evaluateSync (node_modules/gensync/index.js:251:28)
[32mtests_1    |[0m       at sync (node_modules/gensync/index.js:89:14)
[32mtests_1    |[0m       at fn (node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)
[32mtests_1    |[0m       at transformSync (node_modules/@babel/core/src/transform.ts:66:52)
[32mtests_1    |[0m       at ScriptTransformer.transformSource (node_modules/@jest/transform/build/ScriptTransformer.js:545:31)
[32mtests_1    |[0m       at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/ScriptTransformer.js:674:40)
[32mtests_1    |[0m       at ScriptTransformer.transform (node_modules/@jest/transform/build/ScriptTransformer.js:726:19)
[32mtests_1    |[0m 
[32mtests_1    |[0m FAIL tests/models/box.test.js
[32mtests_1    |[0m   â— Test suite failed to run
[32mtests_1    |[0m 
[32mtests_1    |[0m     SyntaxError: /usr/src/app/tests/models/box.test.js: Unexpected token, expected "," (93:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m       91 |     test("works", async () => {
[32mtests_1    |[0m       92 |       const result = await db.query(
[32mtests_1    |[0m     > 93 |         `INSERT INTO boxes (name, room, move)
[32mtests_1    |[0m          |          ^
[32mtests_1    |[0m       94 |          VALUES ($1, $2, $3)
[32mtests_1    |[0m       95 |          RETURNING id`,
[32mtests_1    |[0m       96 |         ["Box 1", "Living Room", testMoveId]
[32mtests_1    |[0m 
[32mtests_1    |[0m       at constructor (node_modules/@babel/parser/src/parse-error.ts:95:45)
[32mtests_1    |[0m       at Parser.toParseError [as raise] (node_modules/@babel/parser/src/tokenizer/index.ts:1496:19)
[32mtests_1    |[0m       at Parser.raise [as unexpected] (node_modules/@babel/parser/src/tokenizer/index.ts:1536:16)
[32mtests_1    |[0m       at Parser.unexpected [as expect] (node_modules/@babel/parser/src/parser/util.ts:157:12)
[32mtests_1    |[0m       at Parser.expect [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:994:14)
[32mtests_1    |[0m       at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:883:29)
[32mtests_1    |[0m       at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:772:19)
[32mtests_1    |[0m       at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:730:19)
[32mtests_1    |[0m       at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:715:17)
[32mtests_1    |[0m       at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:688:21)
[32mtests_1    |[0m       at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:650:23)
[32mtests_1    |[0m       at Parser.parseMaybeUnary [as parseAwait] (node_modules/@babel/parser/src/parser/expression.ts:2884:28)
[32mtests_1    |[0m       at Parser.parseAwait [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:612:25)
[32mtests_1    |[0m       at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:389:14)
[32mtests_1    |[0m       at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:401:23)
[32mtests_1    |[0m       at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:356:23)
[32mtests_1    |[0m       at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:298:21)
[32mtests_1    |[0m       at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:252:12)
[32mtests_1    |[0m       at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3111:16)
[32mtests_1    |[0m       at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:251:17)
[32mtests_1    |[0m       at Parser.parseMaybeAssignAllowIn [as parseVar] (node_modules/@babel/parser/src/parser/statement.ts:1550:18)
[32mtests_1    |[0m       at Parser.parseVar [as parseVarStatement] (node_modules/@babel/parser/src/parser/statement.ts:1214:10)
[32mtests_1    |[0m       at Parser.parseVarStatement [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:566:21)
[32mtests_1    |[0m       at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:437:17)
[32mtests_1    |[0m       at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:386:17)
[32mtests_1    |[0m       at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1407:16)
[32mtests_1    |[0m       at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
[32mtests_1    |[0m       at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1348:10)
[32mtests_1    |[0m       at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2565:24)
[32mtests_1    |[0m       at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2506:10)
[32mtests_1    |[0m       at Parser.parseArrowExpression [as parseAsyncArrowFromCallExpression] (node_modules/@babel/parser/src/parser/expression.ts:1025:10)
[32mtests_1    |[0m       at Parser.parseAsyncArrowFromCallExpression [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:904:27)
[32mtests_1    |[0m       at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:772:19)
[32mtests_1    |[0m       at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:730:19)
[32mtests_1    |[0m       at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:715:17)
[32mtests_1    |[0m       at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:688:21)
[32mtests_1    |[0m       at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:650:23)
[32mtests_1    |[0m       at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:389:14)
[32mtests_1    |[0m       at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:401:23)
[32mtests_1    |[0m       at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:356:23)
[32mtests_1    |[0m       at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:298:21)
[32mtests_1    |[0m       at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:252:12)
[32mtests_1    |[0m       at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3116:12)
[32mtests_1    |[0m       at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:251:17)
[32mtests_1    |[0m       at Parser.parseMaybeAssignAllowIn [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2728:18)
[32mtests_1    |[0m       at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1005:14)
[32mtests_1    |[0m       at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:883:29)
[32mtests_1    |[0m       at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:772:19)
[32mtests_1    |[0m       at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:730:19)
[32mtests_1    |[0m       at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:715:17)
[32mtests_1    |[0m       at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:688:21)
[32mtests_1    |[0m       at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:650:23)
[32mtests_1    |[0m       at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:389:14)
[32mtests_1    |[0m       at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:401:23)
[32mtests_1    |[0m       at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:356:23)
[32mtests_1    |[0m       at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:298:21)
[32mtests_1    |[0m       at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:221:23)
[32mtests_1    |[0m       at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:212:39)
[32mtests_1    |[0m       at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3111:16)
[32mtests_1    |[0m       at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:212:17)
[32mtests_1    |[0m       at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:656:23)
[32mtests_1    |[0m       at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:437:17)
[32mtests_1    |[0m       at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:386:17)
[32mtests_1    |[0m       at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1407:16)
[32mtests_1    |[0m       at Parser.parseBlockOrModuleBlockBody [as parseBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1380:10)
[32mtests_1    |[0m       at Parser.parseBlockBody [as parseBlock] (node_modules/@babel/parser/src/parser/statement.ts:1348:10)
[32mtests_1    |[0m       at Parser.parseBlock [as parseFunctionBody] (node_modules/@babel/parser/src/parser/expression.ts:2565:24)
[32mtests_1    |[0m       at Parser.parseFunctionBody [as parseArrowExpression] (node_modules/@babel/parser/src/parser/expression.ts:2506:10)
[32mtests_1    |[0m       at Parser.parseArrowExpression [as parseParenAndDistinguishExpression] (node_modules/@babel/parser/src/parser/expression.ts:1802:12)
[32mtests_1    |[0m       at Parser.parseParenAndDistinguishExpression [as parseExprAtom] (node_modules/@babel/parser/src/parser/expression.ts:1126:21)
[32mtests_1    |[0m       at Parser.parseExprAtom [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:709:23)
[32mtests_1    |[0m       at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:688:21)
[32mtests_1    |[0m       at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:650:23)
[32mtests_1    |[0m       at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:389:14)
[32mtests_1    |[0m       at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:401:23)
[32mtests_1    |[0m       at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:356:23)
[32mtests_1    |[0m       at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:298:21)
[32mtests_1    |[0m       at parseMaybeAssign (node_modules/@babel/parser/src/parser/expression.ts:252:12)
[32mtests_1    |[0m       at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3116:12)
[32mtests_1    |[0m       at Parser.allowInAnd [as parseMaybeAssignAllowIn] (node_modules/@babel/parser/src/parser/expression.ts:251:17)
[32mtests_1    |[0m       at Parser.parseMaybeAssignAllowIn [as parseExprListItem] (node_modules/@babel/parser/src/parser/expression.ts:2728:18)
[32mtests_1    |[0m       at Parser.parseExprListItem [as parseCallExpressionArguments] (node_modules/@babel/parser/src/parser/expression.ts:1005:14)
[32mtests_1    |[0m       at Parser.parseCallExpressionArguments [as parseCoverCallAndAsyncArrowHead] (node_modules/@babel/parser/src/parser/expression.ts:883:29)
[32mtests_1    |[0m       at Parser.parseCoverCallAndAsyncArrowHead [as parseSubscript] (node_modules/@babel/parser/src/parser/expression.ts:772:19)
[32mtests_1    |[0m       at Parser.parseSubscript [as parseSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:730:19)
[32mtests_1    |[0m       at Parser.parseSubscripts [as parseExprSubscripts] (node_modules/@babel/parser/src/parser/expression.ts:715:17)
[32mtests_1    |[0m       at Parser.parseExprSubscripts [as parseUpdate] (node_modules/@babel/parser/src/parser/expression.ts:688:21)
[32mtests_1    |[0m       at Parser.parseUpdate [as parseMaybeUnary] (node_modules/@babel/parser/src/parser/expression.ts:650:23)
[32mtests_1    |[0m       at Parser.parseMaybeUnary [as parseMaybeUnaryOrPrivate] (node_modules/@babel/parser/src/parser/expression.ts:389:14)
[32mtests_1    |[0m       at Parser.parseMaybeUnaryOrPrivate [as parseExprOps] (node_modules/@babel/parser/src/parser/expression.ts:401:23)
[32mtests_1    |[0m       at Parser.parseExprOps [as parseMaybeConditional] (node_modules/@babel/parser/src/parser/expression.ts:356:23)
[32mtests_1    |[0m       at Parser.parseMaybeConditional [as parseMaybeAssign] (node_modules/@babel/parser/src/parser/expression.ts:298:21)
[32mtests_1    |[0m       at Parser.parseMaybeAssign [as parseExpressionBase] (node_modules/@babel/parser/src/parser/expression.ts:221:23)
[32mtests_1    |[0m       at parseExpressionBase (node_modules/@babel/parser/src/parser/expression.ts:212:39)
[32mtests_1    |[0m       at Parser.callback [as allowInAnd] (node_modules/@babel/parser/src/parser/expression.ts:3111:16)
[32mtests_1    |[0m       at Parser.allowInAnd [as parseExpression] (node_modules/@babel/parser/src/parser/expression.ts:212:17)
[32mtests_1    |[0m       at Parser.parseExpression [as parseStatementContent] (node_modules/@babel/parser/src/parser/statement.ts:656:23)
[32mtests_1    |[0m       at Parser.parseStatementContent [as parseStatementLike] (node_modules/@babel/parser/src/parser/statement.ts:437:17)
[32mtests_1    |[0m       at Parser.parseStatementLike [as parseStatementListItem] (node_modules/@babel/parser/src/parser/statement.ts:386:17)
[32mtests_1    |[0m       at Parser.parseStatementListItem [as parseBlockOrModuleBlockBody] (node_modules/@babel/parser/src/parser/statement.ts:1407:16)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     QRBoxer Config:
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:22:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     SECRET_KEY: secret-dev
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:23:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PORT: 3001
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:24:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     BCRYPT_WORK_FACTOR 1
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:25:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database: postgresql://test_user:test_password@test-db:5432/test_db
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:26:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     ---
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:27:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     QRBoxer Config:
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:22:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     SECRET_KEY: secret-dev
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:23:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PORT: 3001
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:24:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     BCRYPT_WORK_FACTOR 1
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:25:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database: postgresql://test_user:test_password@test-db:5432/test_db
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:26:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     ---
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:27:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     POST /items hit with body: { description: 'Kitchen appliance', box: 1, image: 'test.jpg' }
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (routes/items.js:14:11)
[32mtests_1    |[0m 
[32mtests_1    |[0m POST /items 201 78 - 7.727 ms
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     POST /items hit with body: { description: 'Missing box field' }
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (routes/items.js:14:11)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.error
[32mtests_1    |[0m     POST /items error: BadRequestError: instance requires property "box"
[32mtests_1    |[0m         at /usr/src/app/routes/items.js:19:13
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/route.js:144:13)
[32mtests_1    |[0m         at Route.dispatch (/usr/src/app/node_modules/express/lib/router/route.js:114:3)
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at /usr/src/app/node_modules/express/lib/router/index.js:284:15
[32mtests_1    |[0m         at Function.process_params (/usr/src/app/node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m         at Function.handle (/usr/src/app/node_modules/express/lib/router/index.js:175:3)
[32mtests_1    |[0m         at router (/usr/src/app/node_modules/express/lib/router/index.js:47:12)
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at trim_prefix (/usr/src/app/node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m         at /usr/src/app/node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m         at Function.process_params (/usr/src/app/node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m         at next (/usr/src/app/middleware/auth.js:15:12)
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at trim_prefix (/usr/src/app/node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m         at /usr/src/app/node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m         at Function.process_params (/usr/src/app/node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m         at logger (/usr/src/app/node_modules/morgan/index.js:144:5)
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at trim_prefix (/usr/src/app/node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m         at /usr/src/app/node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m         at Function.process_params (/usr/src/app/node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m         at /usr/src/app/node_modules/body-parser/lib/read.js:137:5
[32mtests_1    |[0m         at AsyncResource.runInAsyncScope (node:async_hooks:203:9)
[32mtests_1    |[0m         at invokeCallback (/usr/src/app/node_modules/raw-body/index.js:231:16)
[32mtests_1    |[0m         at done (/usr/src/app/node_modules/raw-body/index.js:220:7)
[32mtests_1    |[0m         at IncomingMessage.onEnd (/usr/src/app/node_modules/raw-body/index.js:280:7)
[32mtests_1    |[0m         at IncomingMessage.emit (node:events:525:35)
[32mtests_1    |[0m         at endReadableNT (node:internal/streams/readable:1358:12)
[32mtests_1    |[0m         at processTicksAndRejections (node:internal/process/task_queues:83:21) {
[32mtests_1    |[0m       status: 400
[32mtests_1    |[0m     }
[32mtests_1    |[0m 
[32mtests_1    |[0m       23 |     return res.status(201).json({ item });
[32mtests_1    |[0m       24 |   } catch (err) {
[32mtests_1    |[0m     > 25 |     console.error("POST /items error:", err); // Add error logging
[32mtests_1    |[0m          |             ^
[32mtests_1    |[0m       26 |     return next(err);
[32mtests_1    |[0m       27 |   }
[32mtests_1    |[0m       28 | });
[32mtests_1    |[0m 
[32mtests_1    |[0m       at error (routes/items.js:25:13)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/route.js:144:13)
[32mtests_1    |[0m       at Route.dispatch (node_modules/express/lib/router/route.js:114:3)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at node_modules/express/lib/router/index.js:284:15
[32mtests_1    |[0m       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m       at Function.handle (node_modules/express/lib/router/index.js:175:3)
[32mtests_1    |[0m       at router (node_modules/express/lib/router/index.js:47:12)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m       at node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m       at next (middleware/auth.js:15:12)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m       at node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m       at logger (node_modules/morgan/index.js:144:5)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m       at node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m       at node_modules/body-parser/lib/read.js:137:5
[32mtests_1    |[0m       at invokeCallback (node_modules/raw-body/index.js:231:16)
[32mtests_1    |[0m       at done (node_modules/raw-body/index.js:220:7)
[32mtests_1    |[0m       at IncomingMessage.onEnd (node_modules/raw-body/index.js:280:7)
[32mtests_1    |[0m 
[32mtests_1    |[0m POST /items 400 73 - 18.072 ms
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     POST /items hit with body: { description: 'Test description', box: 'not-a-number' }
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (routes/items.js:14:11)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.error
[32mtests_1    |[0m     POST /items error: BadRequestError: instance.box is not of a type(s) integer
[32mtests_1    |[0m         at /usr/src/app/routes/items.js:19:13
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/route.js:144:13)
[32mtests_1    |[0m         at Route.dispatch (/usr/src/app/node_modules/express/lib/router/route.js:114:3)
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at /usr/src/app/node_modules/express/lib/router/index.js:284:15
[32mtests_1    |[0m         at Function.process_params (/usr/src/app/node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m         at Function.handle (/usr/src/app/node_modules/express/lib/router/index.js:175:3)
[32mtests_1    |[0m         at router (/usr/src/app/node_modules/express/lib/router/index.js:47:12)
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at trim_prefix (/usr/src/app/node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m         at /usr/src/app/node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m         at Function.process_params (/usr/src/app/node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m         at next (/usr/src/app/middleware/auth.js:15:12)
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at trim_prefix (/usr/src/app/node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m         at /usr/src/app/node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m         at Function.process_params (/usr/src/app/node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m         at logger (/usr/src/app/node_modules/morgan/index.js:144:5)
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at trim_prefix (/usr/src/app/node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m         at /usr/src/app/node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m         at Function.process_params (/usr/src/app/node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m         at /usr/src/app/node_modules/body-parser/lib/read.js:137:5
[32mtests_1    |[0m         at AsyncResource.runInAsyncScope (node:async_hooks:203:9)
[32mtests_1    |[0m         at invokeCallback (/usr/src/app/node_modules/raw-body/index.js:231:16)
[32mtests_1    |[0m         at done (/usr/src/app/node_modules/raw-body/index.js:220:7)
[32mtests_1    |[0m         at IncomingMessage.onEnd (/usr/src/app/node_modules/raw-body/index.js:280:7)
[32mtests_1    |[0m         at IncomingMessage.emit (node:events:525:35)
[32mtests_1    |[0m         at endReadableNT (node:internal/streams/readable:1358:12)
[32mtests_1    |[0m         at processTicksAndRejections (node:internal/process/task_queues:83:21) {
[32mtests_1    |[0m       status: 400
[32mtests_1    |[0m     }
[32mtests_1    |[0m 
[32mtests_1    |[0m       23 |     return res.status(201).json({ item });
[32mtests_1    |[0m       24 |   } catch (err) {
[32mtests_1    |[0m     > 25 |     console.error("POST /items error:", err); // Add error logging
[32mtests_1    |[0m          |             ^
[32mtests_1    |[0m       26 |     return next(err);
[32mtests_1    |[0m       27 |   }
[32mtests_1    |[0m       28 | });
[32mtests_1    |[0m 
[32mtests_1    |[0m       at error (routes/items.js:25:13)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/route.js:144:13)
[32mtests_1    |[0m       at Route.dispatch (node_modules/express/lib/router/route.js:114:3)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at node_modules/express/lib/router/index.js:284:15
[32mtests_1    |[0m       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m       at Function.handle (node_modules/express/lib/router/index.js:175:3)
[32mtests_1    |[0m       at router (node_modules/express/lib/router/index.js:47:12)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m       at node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m       at next (middleware/auth.js:15:12)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m       at node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m       at logger (node_modules/morgan/index.js:144:5)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m       at node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m       at node_modules/body-parser/lib/read.js:137:5
[32mtests_1    |[0m       at invokeCallback (node_modules/raw-body/index.js:231:16)
[32mtests_1    |[0m       at done (node_modules/raw-body/index.js:220:7)
[32mtests_1    |[0m       at IncomingMessage.onEnd (node_modules/raw-body/index.js:280:7)
[32mtests_1    |[0m 
[32mtests_1    |[0m POST /items 400 79 - 11.213 ms
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     GET /items hit with query: {}
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (routes/items.js:31:11)
[32mtests_1    |[0m 
[32mtests_1    |[0m GET /items 200 149 - 3.056 ms
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     GET /items hit with query: { box: '1' }
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (routes/items.js:31:11)
[32mtests_1    |[0m 
[32mtests_1    |[0m GET /items?box=1 200 82 - 2.980 ms
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     GET /items/:id hit with id: 1
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (routes/items.js:42:11)
[32mtests_1    |[0m 
[32mtests_1    |[0m GET /items/1 200 78 - 2.785 ms
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     GET /items/:id hit with id: 0
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (routes/items.js:42:11)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.error
[32mtests_1    |[0m     GET /items/:id error: NotFoundError: No item: 0
[32mtests_1    |[0m         at Object.<anonymous> (/usr/src/app/tests/routes/itemRoutes.test.js:140:34)
[32mtests_1    |[0m         at Promise.then.completed (/usr/src/app/node_modules/jest-circus/build/utils.js:298:28)
[32mtests_1    |[0m         at new Promise (<anonymous>)
[32mtests_1    |[0m         at callAsyncCircusFn (/usr/src/app/node_modules/jest-circus/build/utils.js:231:10)
[32mtests_1    |[0m         at _callCircusTest (/usr/src/app/node_modules/jest-circus/build/run.js:316:40)
[32mtests_1    |[0m         at processTicksAndRejections (node:internal/process/task_queues:96:5)
[32mtests_1    |[0m         at _runTest (/usr/src/app/node_modules/jest-circus/build/run.js:252:3)
[32mtests_1    |[0m         at _runTestsForDescribeBlock (/usr/src/app/node_modules/jest-circus/build/run.js:126:9)
[32mtests_1    |[0m         at _runTestsForDescribeBlock (/usr/src/app/node_modules/jest-circus/build/run.js:121:9)
[32mtests_1    |[0m         at _runTestsForDescribeBlock (/usr/src/app/node_modules/jest-circus/build/run.js:121:9)
[32mtests_1    |[0m         at run (/usr/src/app/node_modules/jest-circus/build/run.js:71:3)
[32mtests_1    |[0m         at runAndTransformResultsToJestFormat (/usr/src/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
[32mtests_1    |[0m         at jestAdapter (/usr/src/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
[32mtests_1    |[0m         at runTestInternal (/usr/src/app/node_modules/jest-runner/build/runTest.js:367:16)
[32mtests_1    |[0m         at runTest (/usr/src/app/node_modules/jest-runner/build/runTest.js:444:34) {
[32mtests_1    |[0m       status: 404
[32mtests_1    |[0m     }
[32mtests_1    |[0m 
[32mtests_1    |[0m       45 |     return res.json({ item });
[32mtests_1    |[0m       46 |   } catch (err) {
[32mtests_1    |[0m     > 47 |     console.error("GET /items/:id error:", err); // Add error logging
[32mtests_1    |[0m          |             ^
[32mtests_1    |[0m       48 |     return next(err);
[32mtests_1    |[0m       49 |   }
[32mtests_1    |[0m       50 | });
[32mtests_1    |[0m 
[32mtests_1    |[0m       at error (routes/items.js:47:13)
[32mtests_1    |[0m 
[32mtests_1    |[0m GET /items/0 404 47 - 7.858 ms
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PATCH /items/:id hit with id: 1 body: {
[32mtests_1    |[0m       description: 'Updated Kitchen appliance',
[32mtests_1    |[0m       box: 2,
[32mtests_1    |[0m       image: 'updated.jpg'
[32mtests_1    |[0m     }
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (routes/items.js:53:11)
[32mtests_1    |[0m 
[32mtests_1    |[0m PATCH /items/1 200 89 - 2.518 ms
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PATCH /items/:id hit with id: 1 body: { box: 'not-a-number' }
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (routes/items.js:53:11)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.error
[32mtests_1    |[0m     PATCH /items/:id error: BadRequestError: instance.box is not of a type(s) integer
[32mtests_1    |[0m         at /usr/src/app/routes/items.js:58:13
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/route.js:144:13)
[32mtests_1    |[0m         at Route.dispatch (/usr/src/app/node_modules/express/lib/router/route.js:114:3)
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at /usr/src/app/node_modules/express/lib/router/index.js:284:15
[32mtests_1    |[0m         at param (/usr/src/app/node_modules/express/lib/router/index.js:365:14)
[32mtests_1    |[0m         at param (/usr/src/app/node_modules/express/lib/router/index.js:376:14)
[32mtests_1    |[0m         at Function.process_params (/usr/src/app/node_modules/express/lib/router/index.js:421:3)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m         at Function.handle (/usr/src/app/node_modules/express/lib/router/index.js:175:3)
[32mtests_1    |[0m         at router (/usr/src/app/node_modules/express/lib/router/index.js:47:12)
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at trim_prefix (/usr/src/app/node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m         at /usr/src/app/node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m         at Function.process_params (/usr/src/app/node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m         at next (/usr/src/app/middleware/auth.js:15:12)
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at trim_prefix (/usr/src/app/node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m         at /usr/src/app/node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m         at Function.process_params (/usr/src/app/node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m         at logger (/usr/src/app/node_modules/morgan/index.js:144:5)
[32mtests_1    |[0m         at Layer.handle [as handle_request] (/usr/src/app/node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m         at trim_prefix (/usr/src/app/node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m         at /usr/src/app/node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m         at Function.process_params (/usr/src/app/node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m         at next (/usr/src/app/node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m         at /usr/src/app/node_modules/body-parser/lib/read.js:137:5
[32mtests_1    |[0m         at AsyncResource.runInAsyncScope (node:async_hooks:203:9)
[32mtests_1    |[0m         at invokeCallback (/usr/src/app/node_modules/raw-body/index.js:231:16)
[32mtests_1    |[0m         at done (/usr/src/app/node_modules/raw-body/index.js:220:7)
[32mtests_1    |[0m         at IncomingMessage.onEnd (/usr/src/app/node_modules/raw-body/index.js:280:7)
[32mtests_1    |[0m         at IncomingMessage.emit (node:events:525:35)
[32mtests_1    |[0m         at endReadableNT (node:internal/streams/readable:1358:12)
[32mtests_1    |[0m         at processTicksAndRejections (node:internal/process/task_queues:83:21) {
[32mtests_1    |[0m       status: 400
[32mtests_1    |[0m     }
[32mtests_1    |[0m 
[32mtests_1    |[0m       62 |     return res.json({ item });
[32mtests_1    |[0m       63 |   } catch (err) {
[32mtests_1    |[0m     > 64 |     console.error("PATCH /items/:id error:", err); // Add error logging
[32mtests_1    |[0m          |             ^
[32mtests_1    |[0m       65 |     return next(err);
[32mtests_1    |[0m       66 |   }
[32mtests_1    |[0m       67 | });
[32mtests_1    |[0m 
[32mtests_1    |[0m       at error (routes/items.js:64:13)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/route.js:144:13)
[32mtests_1    |[0m       at Route.dispatch (node_modules/express/lib/router/route.js:114:3)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at node_modules/express/lib/router/index.js:284:15
[32mtests_1    |[0m       at param (node_modules/express/lib/router/index.js:365:14)
[32mtests_1    |[0m       at param (node_modules/express/lib/router/index.js:376:14)
[32mtests_1    |[0m       at Function.process_params (node_modules/express/lib/router/index.js:421:3)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m       at Function.handle (node_modules/express/lib/router/index.js:175:3)
[32mtests_1    |[0m       at router (node_modules/express/lib/router/index.js:47:12)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m       at node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m       at next (middleware/auth.js:15:12)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m       at node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m       at logger (node_modules/morgan/index.js:144:5)
[32mtests_1    |[0m       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
[32mtests_1    |[0m       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
[32mtests_1    |[0m       at node_modules/express/lib/router/index.js:286:9
[32mtests_1    |[0m       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
[32mtests_1    |[0m       at next (node_modules/express/lib/router/index.js:280:10)
[32mtests_1    |[0m       at node_modules/body-parser/lib/read.js:137:5
[32mtests_1    |[0m       at invokeCallback (node_modules/raw-body/index.js:231:16)
[32mtests_1    |[0m       at done (node_modules/raw-body/index.js:220:7)
[32mtests_1    |[0m       at IncomingMessage.onEnd (node_modules/raw-body/index.js:280:7)
[32mtests_1    |[0m 
[32mtests_1    |[0m PATCH /items/1 400 79 - 10.614 ms
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PATCH /items/:id hit with id: 0 body: { description: 'Updated description' }
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (routes/items.js:53:11)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.error
[32mtests_1    |[0m     PATCH /items/:id error: NotFoundError: No item: 0
[32mtests_1    |[0m         at Object.<anonymous> (/usr/src/app/tests/routes/itemRoutes.test.js:185:37)
[32mtests_1    |[0m         at Promise.then.completed (/usr/src/app/node_modules/jest-circus/build/utils.js:298:28)
[32mtests_1    |[0m         at new Promise (<anonymous>)
[32mtests_1    |[0m         at callAsyncCircusFn (/usr/src/app/node_modules/jest-circus/build/utils.js:231:10)
[32mtests_1    |[0m         at _callCircusTest (/usr/src/app/node_modules/jest-circus/build/run.js:316:40)
[32mtests_1    |[0m         at processTicksAndRejections (node:internal/process/task_queues:96:5)
[32mtests_1    |[0m         at _runTest (/usr/src/app/node_modules/jest-circus/build/run.js:252:3)
[32mtests_1    |[0m         at _runTestsForDescribeBlock (/usr/src/app/node_modules/jest-circus/build/run.js:126:9)
[32mtests_1    |[0m         at _runTestsForDescribeBlock (/usr/src/app/node_modules/jest-circus/build/run.js:121:9)
[32mtests_1    |[0m         at _runTestsForDescribeBlock (/usr/src/app/node_modules/jest-circus/build/run.js:121:9)
[32mtests_1    |[0m         at run (/usr/src/app/node_modules/jest-circus/build/run.js:71:3)
[32mtests_1    |[0m         at runAndTransformResultsToJestFormat (/usr/src/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
[32mtests_1    |[0m         at jestAdapter (/usr/src/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
[32mtests_1    |[0m         at runTestInternal (/usr/src/app/node_modules/jest-runner/build/runTest.js:367:16)
[32mtests_1    |[0m         at runTest (/usr/src/app/node_modules/jest-runner/build/runTest.js:444:34) {
[32mtests_1    |[0m       status: 404
[32mtests_1    |[0m     }
[32mtests_1    |[0m 
[32mtests_1    |[0m       62 |     return res.json({ item });
[32mtests_1    |[0m       63 |   } catch (err) {
[32mtests_1    |[0m     > 64 |     console.error("PATCH /items/:id error:", err); // Add error logging
[32mtests_1    |[0m          |             ^
[32mtests_1    |[0m       65 |     return next(err);
[32mtests_1    |[0m       66 |   }
[32mtests_1    |[0m       67 | });
[32mtests_1    |[0m 
[32mtests_1    |[0m       at error (routes/items.js:64:13)
[32mtests_1    |[0m 
[32mtests_1    |[0m PATCH /items/0 404 47 - 3.393 ms
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     DELETE /items/:id hit with id: 1
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (routes/items.js:70:11)
[32mtests_1    |[0m 
[32mtests_1    |[0m DELETE /items/1 200 13 - 2.723 ms
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     DELETE /items/:id hit with id: 0
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (routes/items.js:70:11)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.error
[32mtests_1    |[0m     DELETE /items/:id error: NotFoundError: No item: 0
[32mtests_1    |[0m         at Object.<anonymous> (/usr/src/app/tests/routes/itemRoutes.test.js:208:37)
[32mtests_1    |[0m         at Promise.then.completed (/usr/src/app/node_modules/jest-circus/build/utils.js:298:28)
[32mtests_1    |[0m         at new Promise (<anonymous>)
[32mtests_1    |[0m         at callAsyncCircusFn (/usr/src/app/node_modules/jest-circus/build/utils.js:231:10)
[32mtests_1    |[0m         at _callCircusTest (/usr/src/app/node_modules/jest-circus/build/run.js:316:40)
[32mtests_1    |[0m         at processTicksAndRejections (node:internal/process/task_queues:96:5)
[32mtests_1    |[0m         at _runTest (/usr/src/app/node_modules/jest-circus/build/run.js:252:3)
[32mtests_1    |[0m         at _runTestsForDescribeBlock (/usr/src/app/node_modules/jest-circus/build/run.js:126:9)
[32mtests_1    |[0m         at _runTestsForDescribeBlock (/usr/src/app/node_modules/jest-circus/build/run.js:121:9)
[32mtests_1    |[0m         at _runTestsForDescribeBlock (/usr/src/app/node_modules/jest-circus/build/run.js:121:9)
[32mtests_1    |[0m         at run (/usr/src/app/node_modules/jest-circus/build/run.js:71:3)
[32mtests_1    |[0m         at runAndTransformResultsToJestFormat (/usr/src/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
[32mtests_1    |[0m         at jestAdapter (/usr/src/app/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
[32mtests_1    |[0m         at runTestInternal (/usr/src/app/node_modules/jest-runner/build/runTest.js:367:16)
[32mtests_1    |[0m         at runTest (/usr/src/app/node_modules/jest-runner/build/runTest.js:444:34) {
[32mtests_1    |[0m       status: 404
[32mtests_1    |[0m     }
[32mtests_1    |[0m 
[32mtests_1    |[0m       73 |     return res.json({ deleted: +req.params.id });
[32mtests_1    |[0m       74 |   } catch (err) {
[32mtests_1    |[0m     > 75 |     console.error("DELETE /items/:id error:", err); // Add error logging
[32mtests_1    |[0m          |             ^
[32mtests_1    |[0m       76 |     return next(err);
[32mtests_1    |[0m       77 |   }
[32mtests_1    |[0m       78 | });
[32mtests_1    |[0m 
[32mtests_1    |[0m       at error (routes/items.js:75:13)
[32mtests_1    |[0m 
[32mtests_1    |[0m DELETE /items/0 404 47 - 3.867 ms
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database connection closed.
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (config/db.js:61:13)
[32mtests_1    |[0m 
[32mtests_1    |[0m PASS tests/routes/itemRoutes.test.js
[32mtests_1    |[0m   Item Routes Test
[32mtests_1    |[0m     POST /items
[32mtests_1    |[0m       âœ“ works: creates a new item (44 ms)
[32mtests_1    |[0m       âœ“ bad request with missing data (84 ms)
[32mtests_1    |[0m       âœ“ bad request with invalid data type (30 ms)
[32mtests_1    |[0m     GET /items
[32mtests_1    |[0m       âœ“ works: gets all items (13 ms)
[32mtests_1    |[0m       âœ“ works: filtering with query (15 ms)
[32mtests_1    |[0m     GET /items/:id
[32mtests_1    |[0m       âœ“ works: gets item by id (10 ms)
[32mtests_1    |[0m       âœ“ not found for non-existent item (16 ms)
[32mtests_1    |[0m     PATCH /items/:id
[32mtests_1    |[0m       âœ“ works: updates item (11 ms)
[32mtests_1    |[0m       âœ“ bad request with invalid data (19 ms)
[32mtests_1    |[0m       âœ“ not found for non-existent item (13 ms)
[32mtests_1    |[0m     DELETE /items/:id
[32mtests_1    |[0m       âœ“ works: deletes item (9 ms)
[32mtests_1    |[0m       âœ“ not found for non-existent item (12 ms)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     QRBoxer Config:
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:22:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     SECRET_KEY: secret-dev
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:23:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PORT: 3001
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:24:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     BCRYPT_WORK_FACTOR 1
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:25:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database: postgresql://test_user:test_password@test-db:5432/test_db
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:26:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     ---
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:27:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database connection closed.
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (config/db.js:61:13)
[32mtests_1    |[0m 
[32mtests_1    |[0m PASS tests/models/user.test.js
[32mtests_1    |[0m   User Model Tests
[32mtests_1    |[0m     authenticate
[32mtests_1    |[0m       âœ“ works with valid credentials (63 ms)
[32mtests_1    |[0m       âœ“ fails with wrong password (41 ms)
[32mtests_1    |[0m       âœ“ fails with non-existent user (15 ms)
[32mtests_1    |[0m     register
[32mtests_1    |[0m       âœ“ works (23 ms)
[32mtests_1    |[0m       âœ“ fails with duplicate username (25 ms)
[32mtests_1    |[0m     findAll
[32mtests_1    |[0m       âœ“ works (42 ms)
[32mtests_1    |[0m     get
[32mtests_1    |[0m       âœ“ works (26 ms)
[32mtests_1    |[0m       âœ“ not found if no such user (24 ms)
[32mtests_1    |[0m     update
[32mtests_1    |[0m       âœ“ works (23 ms)
[32mtests_1    |[0m     remove
[32mtests_1    |[0m       âœ“ works (25 ms)
[32mtests_1    |[0m       âœ“ not found if no such user (17 ms)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     QRBoxer Config:
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:22:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     SECRET_KEY: secret-dev
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:23:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PORT: 3001
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:24:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     BCRYPT_WORK_FACTOR 1
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:25:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database: postgresql://test_user:test_password@test-db:5432/test_db
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:26:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     ---
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:27:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m POST /auth/token 200 22 - 4.347 ms
[32mtests_1    |[0m POST /auth/token 401 62 - 2.057 ms
[32mtests_1    |[0m POST /auth/token 401 62 - 3.551 ms
[32mtests_1    |[0m POST /auth/token 400 78 - 0.740 ms
[32mtests_1    |[0m POST /auth/token 400 83 - 3.376 ms
[32mtests_1    |[0m POST /auth/register 201 22 - 11.991 ms
[32mtests_1    |[0m POST /auth/register 400 65 - 2.454 ms
[32mtests_1    |[0m POST /auth/register 400 94 - 1.547 ms
[32mtests_1    |[0m POST /auth/register 400 202 - 1.525 ms
[32mtests_1    |[0m POST /auth/register 400 83 - 1.627 ms
[32mtests_1    |[0m POST /auth/register 201 22 - 12.194 ms
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database connection closed.
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (config/db.js:61:13)
[32mtests_1    |[0m 
[32mtests_1    |[0m PASS tests/routes/authRoutes.test.js
[32mtests_1    |[0m   Auth Routes Test
[32mtests_1    |[0m     POST /auth/token
[32mtests_1    |[0m       âœ“ works: can login with valid credentials (68 ms)
[32mtests_1    |[0m       âœ“ unauth with non-existent user (27 ms)
[32mtests_1    |[0m       âœ“ unauth with wrong password (27 ms)
[32mtests_1    |[0m       âœ“ bad request with missing data (21 ms)
[32mtests_1    |[0m       âœ“ bad request with invalid data (31 ms)
[32mtests_1    |[0m     POST /auth/register
[32mtests_1    |[0m       âœ“ works: can register (39 ms)
[32mtests_1    |[0m       âœ“ bad request with duplicate username (24 ms)
[32mtests_1    |[0m       âœ“ bad request with invalid email (24 ms)
[32mtests_1    |[0m       âœ“ bad request with missing fields (25 ms)
[32mtests_1    |[0m       âœ“ bad request with invalid data types (24 ms)
[32mtests_1    |[0m       âœ“ cannot set admin to true (38 ms)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     QRBoxer Config:
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:22:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     SECRET_KEY: secret-dev
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:23:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PORT: 3001
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:24:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     BCRYPT_WORK_FACTOR 1
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:25:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database: postgresql://test_user:test_password@test-db:5432/test_db
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:26:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     ---
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:27:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database connection closed.
[32mtests_1    |[0m 
[32mtests_1    |[0m       at log (config/db.js:61:13)
[32mtests_1    |[0m 
[32mtests_1    |[0m PASS tests/models/item.test.js
[32mtests_1    |[0m   Item Model Tests
[32mtests_1    |[0m     âœ“ can create an item (70 ms)
[32mtests_1    |[0m     âœ“ can find all items (74 ms)
[32mtests_1    |[0m     âœ“ can get item by id (67 ms)
[32mtests_1    |[0m     âœ“ can find items by box (75 ms)
[32mtests_1    |[0m     âœ“ can update item (74 ms)
[32mtests_1    |[0m     âœ“ not found if no such item (60 ms)
[32mtests_1    |[0m     âœ“ can delete item (91 ms)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     QRBoxer Config:
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:22:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     SECRET_KEY: secret-dev
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:23:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PORT: 3001
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:24:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     BCRYPT_WORK_FACTOR 1
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:25:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database: postgresql://test_user:test_password@test-db:5432/test_db
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:26:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     ---
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:27:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     QRBoxer Config:
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:22:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     SECRET_KEY: secret-dev
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:23:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PORT: 3001
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:24:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     BCRYPT_WORK_FACTOR 1
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:25:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database: postgresql://test_user:test_password@test-db:5432/test_db
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:26:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     ---
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:27:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     QRBoxer Config:
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:22:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     SECRET_KEY: secret-dev
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:23:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     PORT: 3001
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:24:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     BCRYPT_WORK_FACTOR 1
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:25:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     Database: postgresql://test_user:test_password@test-db:5432/test_db
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:26:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m   console.log
[32mtests_1    |[0m     ---
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Object.log (config/config.js:27:9)
[32mtests_1    |[0m 
[32mtests_1    |[0m POST /moves 201 128 - 2.949 ms
[32mtests_1    |[0m POST /moves 400 164 - 1.003 ms
[32mtests_1    |[0m PASS tests/routes/moveRoutes.test.js
[32mtests_1    |[0m   Move Routes Test
[32mtests_1    |[0m     POST /moves
[32mtests_1    |[0m       âœ“ works: creates a new move (31 ms)
[32mtests_1    |[0m       âœ“ bad request with missing data (86 ms)
[32mtests_1    |[0m 
[32mtests_1    |[0m Test Suites: 2 failed, 7 passed, 9 total
[32mtests_1    |[0m Tests:       67 passed, 67 total
[32mtests_1    |[0m Snapshots:   0 total
[32mtests_1    |[0m Time:        5.244 s
[32mtests_1    |[0m Ran all test suites.
[32mtests_1    |[0m 
[32mtests_1    |[0m Jest has detected the following 6 open handles potentially keeping Jest from exiting:
[32mtests_1    |[0m 
[32mtests_1    |[0m   â—  TCPWRAP
[32mtests_1    |[0m 
[32mtests_1    |[0m       35 | }
[32mtests_1    |[0m       36 |
[32mtests_1    |[0m     > 37 | db.connect()
[32mtests_1    |[0m          |    ^
[32mtests_1    |[0m       38 |   .catch(err => {
[32mtests_1    |[0m       39 |     console.error('Database connection error:', err.stack);
[32mtests_1    |[0m       40 |     process.exit(1);
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Connection.connect (node_modules/pg/lib/connection.js:38:17)
[32mtests_1    |[0m       at Client._connect (node_modules/pg/lib/client.js:113:11)
[32mtests_1    |[0m       at node_modules/pg/lib/client.js:166:12
[32mtests_1    |[0m       at Client.connect (node_modules/pg/lib/client.js:165:12)
[32mtests_1    |[0m       at Object.connect (config/db.js:37:4)
[32mtests_1    |[0m       at Object.require (models/user.js:3:16)
[32mtests_1    |[0m       at Object.require (routes/auth.js:5:14)
[32mtests_1    |[0m       at Object.require (app.js:9:20)
[32mtests_1    |[0m       at Object.require (tests/routes/userRoutes.test.js:2:13)
[32mtests_1    |[0m 
[32mtests_1    |[0m 
[32mtests_1    |[0m   â—  TCPWRAP
[32mtests_1    |[0m 
[32mtests_1    |[0m       35 | }
[32mtests_1    |[0m       36 |
[32mtests_1    |[0m     > 37 | db.connect()
[32mtests_1    |[0m          |    ^
[32mtests_1    |[0m       38 |   .catch(err => {
[32mtests_1    |[0m       39 |     console.error('Database connection error:', err.stack);
[32mtests_1    |[0m       40 |     process.exit(1);
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Connection.connect (node_modules/pg/lib/connection.js:38:17)
[32mtests_1    |[0m       at Client._connect (node_modules/pg/lib/client.js:113:11)
[32mtests_1    |[0m       at node_modules/pg/lib/client.js:166:12
[32mtests_1    |[0m       at Client.connect (node_modules/pg/lib/client.js:165:12)
[32mtests_1    |[0m       at Object.connect (config/db.js:37:4)
[32mtests_1    |[0m       at Object.require (models/move.js:3:16)
[32mtests_1    |[0m       at Object.require (routes/moves.js:7:14)
[32mtests_1    |[0m       at Object.require (app.js:10:21)
[32mtests_1    |[0m       at Object.require (tests/routes/userRoutes.test.js:2:13)
[32mtests_1    |[0m 
[32mtests_1    |[0m 
[32mtests_1    |[0m   â—  TCPWRAP
[32mtests_1    |[0m 
[32mtests_1    |[0m       35 | }
[32mtests_1    |[0m       36 |
[32mtests_1    |[0m     > 37 | db.connect()
[32mtests_1    |[0m          |    ^
[32mtests_1    |[0m       38 |   .catch(err => {
[32mtests_1    |[0m       39 |     console.error('Database connection error:', err.stack);
[32mtests_1    |[0m       40 |     process.exit(1);
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Connection.connect (node_modules/pg/lib/connection.js:38:17)
[32mtests_1    |[0m       at Client._connect (node_modules/pg/lib/client.js:113:11)
[32mtests_1    |[0m       at node_modules/pg/lib/client.js:166:12
[32mtests_1    |[0m       at Client.connect (node_modules/pg/lib/client.js:165:12)
[32mtests_1    |[0m       at Object.connect (config/db.js:37:4)
[32mtests_1    |[0m       at Object.require (models/item.js:3:16)
[32mtests_1    |[0m       at Object.require (routes/boxes.js:10:14)
[32mtests_1    |[0m       at Object.require (app.js:12:21)
[32mtests_1    |[0m       at Object.require (tests/routes/itemRoutes.test.js:4:13)
[32mtests_1    |[0m 
[32mtests_1    |[0m 
[32mtests_1    |[0m   â—  TCPWRAP
[32mtests_1    |[0m 
[32mtests_1    |[0m       35 | }
[32mtests_1    |[0m       36 |
[32mtests_1    |[0m     > 37 | db.connect()
[32mtests_1    |[0m          |    ^
[32mtests_1    |[0m       38 |   .catch(err => {
[32mtests_1    |[0m       39 |     console.error('Database connection error:', err.stack);
[32mtests_1    |[0m       40 |     process.exit(1);
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Connection.connect (node_modules/pg/lib/connection.js:38:17)
[32mtests_1    |[0m       at Client._connect (node_modules/pg/lib/client.js:113:11)
[32mtests_1    |[0m       at node_modules/pg/lib/client.js:166:12
[32mtests_1    |[0m       at Client.connect (node_modules/pg/lib/client.js:165:12)
[32mtests_1    |[0m       at Object.connect (config/db.js:37:4)
[32mtests_1    |[0m       at Object.require (models/user.js:3:16)
[32mtests_1    |[0m       at Object.require (routes/auth.js:5:14)
[32mtests_1    |[0m       at Object.require (app.js:9:20)
[32mtests_1    |[0m       at Object.require (tests/routes/moveRoutes.test.js:2:13)
[32mtests_1    |[0m 
[32mtests_1    |[0m 
[32mtests_1    |[0m   â—  TCPWRAP
[32mtests_1    |[0m 
[32mtests_1    |[0m       35 | }
[32mtests_1    |[0m       36 |
[32mtests_1    |[0m     > 37 | db.connect()
[32mtests_1    |[0m          |    ^
[32mtests_1    |[0m       38 |   .catch(err => {
[32mtests_1    |[0m       39 |     console.error('Database connection error:', err.stack);
[32mtests_1    |[0m       40 |     process.exit(1);
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Connection.connect (node_modules/pg/lib/connection.js:38:17)
[32mtests_1    |[0m       at Client._connect (node_modules/pg/lib/client.js:113:11)
[32mtests_1    |[0m       at node_modules/pg/lib/client.js:166:12
[32mtests_1    |[0m       at Client.connect (node_modules/pg/lib/client.js:165:12)
[32mtests_1    |[0m       at Object.connect (config/db.js:37:4)
[32mtests_1    |[0m       at Object.require (models/move.js:3:16)
[32mtests_1    |[0m       at Object.require (routes/moves.js:7:14)
[32mtests_1    |[0m       at Object.require (app.js:10:21)
[32mtests_1    |[0m       at Object.require (tests/routes/moveRoutes.test.js:2:13)
[32mtests_1    |[0m 
[32mtests_1    |[0m 
[32mtests_1    |[0m   â—  TCPWRAP
[32mtests_1    |[0m 
[32mtests_1    |[0m       35 | }
[32mtests_1    |[0m       36 |
[32mtests_1    |[0m     > 37 | db.connect()
[32mtests_1    |[0m          |    ^
[32mtests_1    |[0m       38 |   .catch(err => {
[32mtests_1    |[0m       39 |     console.error('Database connection error:', err.stack);
[32mtests_1    |[0m       40 |     process.exit(1);
[32mtests_1    |[0m 
[32mtests_1    |[0m       at Connection.connect (node_modules/pg/lib/connection.js:38:17)
[32mtests_1    |[0m       at Client._connect (node_modules/pg/lib/client.js:113:11)
[32mtests_1    |[0m       at node_modules/pg/lib/client.js:166:12
[32mtests_1    |[0m       at Client.connect (node_modules/pg/lib/client.js:165:12)
[32mtests_1    |[0m       at Object.connect (config/db.js:37:4)
[32mtests_1    |[0m       at Object.require (models/box.js:3:16)
[32mtests_1    |[0m       at Object.require (routes/moves.js:8:13)
[32mtests_1    |[0m       at Object.require (app.js:10:21)
[32mtests_1    |[0m       at Object.require (tests/routes/moveRoutes.test.js:2:13)
[32mtests_1    |[0m 
[32mtests_1    |[0m npm notice 
[32mtests_1    |[0m npm notice New major version of npm available! 8.19.4 -> 11.0.0
[32mtests_1    |[0m npm notice Changelog: <https://github.com/npm/cli/releases/tag/v11.0.0>
[32mtests_1    |[0m npm notice Run `npm install -g npm@11.0.0` to update!
[32mtests_1    |[0m npm notice 
[32mqrboxer-backend_tests_1 exited with code 1
[0m